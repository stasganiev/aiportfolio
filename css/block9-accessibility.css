/* ===================================
   BLOCK 9: ACCESSIBILITY (A11Y)
   Skip to Content, Focus States, Reduced Motion
   =================================== */

/* ========== Skip to Content Link ========== */
.skip-to-content {
    position: absolute;
    top: -100px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10001;
    padding: 1rem 2rem;
    background: var(--primary);
    color: white;
    text-decoration: none;
    font-weight: 600;
    font-size: 1rem;
    border-radius: 0.5rem;
    box-shadow: 0 4px 12px rgba(96, 165, 250, 0.4);
    transition: top 0.3s ease;
}

.skip-to-content:focus {
    top: 1rem;
}

/* ========== Custom Focus States ========== */
/* Remove default outline and add custom */
*:focus {
    outline: none;
}

/* Custom focus ring */
a:focus-visible,
button:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible,
[tabindex]:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.2);
    transition: box-shadow 0.2s ease, outline 0.2s ease;
}

/* Specific focus styles for interactive elements */
.btn:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 3px;
    box-shadow: 0 0 0 5px rgba(96, 165, 250, 0.25);
}

.nav-link:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 4px;
    border-radius: 0.25rem;
}

/* Card focus states */
.project-card:focus-within,
.skill-card:focus-within,
.article-card:focus-within {
    outline: 2px solid var(--primary);
    outline-offset: 4px;
    box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.15);
}

/* Form elements focus */
.form-input:focus,
.form-textarea:focus {
    outline: 2px solid var(--primary);
    outline-offset: 0;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.2);
}

/* Mobile menu toggle focus */
.mobile-menu-toggle:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 4px;
    border-radius: 0.5rem;
}

/* Theme toggle focus */
.theme-toggle:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 4px;
    border-radius: 50%;
    box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.2);
}

/* Language switcher focus */
.language-toggle:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
}

/* Back to top button focus */
.back-to-top:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 4px;
    box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.25);
}

/* Share buttons focus */
.share-btn:focus-visible,
.project-share-btn:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 3px;
    box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.2);
}

/* Cookie consent buttons focus */
.cookie-btn:focus-visible {
    outline: 2px solid white;
    outline-offset: 3px;
    box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.3);
}

/* ========== Screen Reader Only Content ========== */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Allow screen reader only content to be focusable */
.sr-only-focusable:focus,
.sr-only-focusable:active {
    position: static;
    width: auto;
    height: auto;
    overflow: visible;
    clip: auto;
    white-space: normal;
}

/* ========== Reduced Motion Support ========== */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
    
    /* Disable parallax and complex animations */
    .fade-in,
    .fade-in-delay,
    .fade-in-delay-2,
    .slide-up {
        animation: none !important;
        opacity: 1 !important;
        transform: none !important;
    }
    
    /* Keep functional animations but make them instant */
    .modal-overlay,
    .cookie-consent,
    .share-notification {
        transition: opacity 0.01ms !important;
    }
}

/* ========== High Contrast Mode Support ========== */
@media (prefers-contrast: high) {
    /* Increase border widths for better visibility */
    .btn,
    .card,
    .project-card,
    .skill-card {
        border-width: 2px;
    }
    
    /* Ensure focus states are very visible */
    *:focus-visible {
        outline-width: 3px;
        outline-offset: 3px;
    }
}

/* ========== Light Theme Focus Adjustments ========== */
[data-theme="light"] .cookie-btn:focus-visible {
    outline-color: var(--primary);
    box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.3);
}

[data-theme="light"] .skip-to-content {
    background: var(--primary);
    color: white;
}

/* ========== Keyboard Navigation Helpers ========== */
/* Show focus indicator for keyboard users only */
.js-focus-visible :focus:not(.focus-visible) {
    outline: none;
}

/* Better visibility for links in text */
a:focus-visible {
    text-decoration: underline;
    text-decoration-thickness: 2px;
    text-underline-offset: 2px;
}

/* ========== Responsive Focus States ========== */
@media (max-width: 768px) {
    /* Larger focus areas on mobile for better touch target */
    *:focus-visible {
        outline-width: 3px;
        outline-offset: 3px;
    }
    
    .btn:focus-visible {
        outline-offset: 4px;
        box-shadow: 0 0 0 6px rgba(96, 165, 250, 0.25);
    }
}

/* ========== Print Styles ========== */
@media print {
    .skip-to-content,
    .back-to-top,
    .mobile-menu-toggle,
    .theme-toggle,
    .language-switcher,
    .cookie-consent {
        display: none !important;
    }
}
